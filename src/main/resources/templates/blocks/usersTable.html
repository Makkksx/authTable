<div th:fragment="usersTable">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.min.css" rel="stylesheet"/>
    <link href="https://rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>
    <div class="container">
        <div class="container mt-2 mb-2">
            <div id="toolbar">
                <button id="block" class="btn btn-dark" th:href="@{/table/delete}">Block</button>
                <button id="unblock" class="btn btn-light" th:href="@{/table/delete}">Unblock</button>
                <button id="remove" class="btn btn-danger" th:href="@{/table/delete}">Delete</button>
            </div>
            <table
                    id="table"
                    data-toggle="table"
                    data-search="true"
                    data-toolbar="#toolbar"
                    data-advanced-search="true"
                    data-id-table="advancedTable"
                    data-filter-control="true"
                    data-filter-show-clear="true">
                <thead>
                <tr>
                    <th data-field="state" data-checkbox="true"></th>
                    <th data-field="id" scope="col" data-sortable="true">Id</th>
                    <th data-field="username" scope="col" data-sortable="true">Username</th>
                    <th data-field="client_name" scope="col" data-filter-control="select" data-sortable="true" >Social</th>
                    <th data-field="first_visit" scope="col" data-sortable="true">First visit</th>
                    <th data-field="last_visit" scope="col" data-sortable="true">Last visit</th>
                    <th data-field="status" scope="col" data-filter-control="select" data-sortable="true" >Status</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user: ${users.findAll()}">
                    <td th:id="${user.getId()}"></td>
                    <td th:text="${user.getId()}"></td>
                    <td th:text="${user.getUsername()}"></td>
                    <td th:text="${user.getClientName()}"></td>
                    <td th:text="${user.getFirstVisit()}"></td>
                    <td th:text="${user.getLastVisit()}"></td>
                    <td th:text="${user.getStatus()}"></td>
                </tr>
                </tbody>
            </table>
        </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/editable/bootstrap-table-editable.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/export/bootstrap-table-export.js"></script>
<script src="https://rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter-control/bootstrap-table-filter-control.js"></script>

    <script>
        $(function() {
            $('#table').bootstrapTable()
        })
    </script>
    <script>
        var table = $('#table')
        function getIds() {
            return $.map(table.bootstrapTable('getSelections'), function(row){
                return row.id
            });
        }
        $('#block').on('click', function(){
            var ids = getIds()
            document.location.href = '/table/block/' + ids;
        })
        $('#unblock').on('click', function(){
            var ids = getIds()
            document.location.href = '/table/unblock/' + ids;
        })
        $('#remove').on('click', function(){
            var ids = getIds()
            table.bootstrapTable('remove', {
                field: 'id',
                values: ids
            })
            document.location.href = '/table/delete/' + ids;
        })
    </script>
</div>

